(function(){try{var n=window.$MicrosoftMaps8,t=n.Internal,nt=n.Anchor,tt=t.CanvasDrawingContext,it=n.DefaultTemplateSelector,rt=n.BasicTemplate,ut=t._BoundsAccumulator,ft=t._Gimme,a=n.GlobalConfig,et=t._JSEvent,ot=t._LatLonCrs,v=n.LocationRect,y=t._MapAuthentication,st=t.MapHelper,i=n.Location,ht=n.MapView,ct=n.MercatorCubeCrs,lt=t._MercatorTileUtility,at=t._ObservableCollection,vt=n.VectorMapLayer,yt=t._Overlay,pt=t.ControlTemplate,wt=t._ObservableObject,bt=t._ObservableObjectChangedArgs,kt=t._OverlayEntity,dt=n.ImageryMapLayer,gt=n.Point,ni=n.RasterImageryScene,p=n.SDKMap,ti=n.SimpleAreaPrimitive,ii=n.SimpleLinePrimitive,ri=n.SimplePointPrimitive,ui=n.Size,fi=n.ZoomLevel,e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r=function(){function n(n){n&&(this.addressLine=n.addressLine,this.adminDistrict=n.adminDistrict,this.countryRegion=n.countryRegion,this.district=n.adminDistrict2,this.formattedAddress=n.formattedAddress,this.locality=n.locality,this.postalCode=n.postalCode,this.countryRegionISO2=n.countryRegionIso2)}return n}(),o=function(n){function t(){return n.call(this,null)||this}return e(t,n),t}(r),s=function(){function n(){}return n}(),u=function(){function n(n){var t=this;this.address=new r(n.address);this.bestView=v.fromCorners(new i(n.bbox[0],n.bbox[1]),new i(n.bbox[2],n.bbox[3]));this.entityType=n.entityType;this.location=new f(n.point.coordinates[0],n.point.coordinates[1]);this.location.name=n.name;this.locations=[];n.geocodePoints.forEach(function(n){var i=new f(n.coordinates[0],n.coordinates[1]);i.precision=n.calculationMethod;i.usageTypes=n.usageTypes;t.locations.push(i)});this.matchCode=n.matchCodes[0];this.matchConfidence=n.confidence;this.name=n.name}return n}(),h=function(){function n(){this.businessesAtLocation=[]}return n}(),ei=function(){function n(){}return n}(),oi=function(){function n(){}return n.address="Address",n.adminDivision1="AdminDivision1",n.adminDivision2="AdminDivision2",n.countryRegion="CountryRegion",n.neighborhood="Neighborhood",n.populatedPlace="PopulatedPlace",n.postcode1="Postcode1",n}(),si=function(){function n(){}return n.interpolated="interpolated",n.rooftop="rooftop",n.parcel="parcel",n}(),f=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return e(t,n),t}(i),w=function(){function n(){}return n}(),c=function(){function n(){}return n}(),b=function(){function n(){}return n.none="none",n.good="good",n.ambiguous="ambiguous",n.upHierarchy="upHierarchy",n.modified="modified",n}(),k=function(){function n(){}return n.high="high",n.medium="medium",n.low="low",n.unknown="unknown",n}(),d=function(){function n(){}return n}(),g=function(){function n(n){n&&(this._map=n instanceof p?n.getV8Map():n)}return n.prototype.geocode=function(n){var t=this;n&&n.where&&n.callback?this._map.getContainer().instanceAsync("Geocoder",function(i){i.geocode(n.where,function(t){if(t.success&&t.results){var i=new c;i.results=[];t.results.forEach(function(n){i.results.push(new u(n))});n.callback(i,n.userData)}else n.errorCallback&&n.errorCallback(n)},n.bounds?n.bounds:t._map.getBounds(),n.count,n.includeNeighborhood,n.includeCountryIso2)}):n.errorCallback&&n.errorCallback(n)},n.prototype.reverseGeocode=function(n){n&&n.location&&n.callback?this._map.getContainer().instanceAsync("ReverseGeocoder",function(t){t.reverseGeocode(n.location,function(t){if(t.success&&t.results&&t.results.length>0){var i=t.results[0],r=new u(i);n.callback(r,n.userData)}else n.errorCallback&&n.errorCallback(n)},n.includeEntityTypes,n.includeNeighborhood,n.includeCountryIso2?0:2)}):n.errorCallback&&n.errorCallback(n)},n.prototype.entityLookup=function(n){n.location&&y.instance.authenticateClientAndRetrieveSessionId(function(t){var r=a.features.searchManager,u=r.entityLookupUrl.replace("{latitude}",String(n.location.latitude)).replace("{longitude}",String(n.location.longitude)).replace("{credentials}",t),f=function(t){var e,a,u,r;if(t&&t.resourceSets&&t.resourceSets.length>0&&t.resourceSets[0].resources&&t.resourceSets[0].resources.length>0){var f=t.resourceSets[0].resources[0],c=new h,l=function(n){var t=new o;return t.addressLine=n.addressLine,t.adminDistrict=n.adminDistrict,t.countryRegion=n.countryRegion,t.countryRegionISO2=n.countryRegionISO2,t.district=n.district,t.formattedAddress=n.formattedAddress,t.locality=n.locality,t.location=new i(n.latitude,n.longitude),t};for(f.addressOfLocation&&f.addressOfLocation.length>0&&(c.addressOfLocation=l(f.addressOfLocation[0])),e=0,a=f.businessesAtLocation.length;e<a;e++)u=f.businessesAtLocation[e],r=new s,r.businessAddress=l(u.businessAddress),r.entityName=u.businessInfo.entityName,r.id=u.businessInfo.id,r.otherTypeIds=u.businessInfo.otherTypeIds,r.otherTypes=u.businessInfo.otherTypes,r.phone=u.businessInfo.phone,r.type=u.businessInfo.type,r.typeId=u.businessInfo.typeId,r.url=u.businessInfo.url,c.businessesAtLocation.push(r);n.callback(c)}};Network.downloadJson(u,"lookupEntity",f,function(){n.errorCallback(n)},null,!1,null,!1,null)})},n}();n.Search=n.Search||{};n.Search.Address=r;n.Search.BusinessAddress=o;n.Search.BusinessResult=s;n.Search.EntityLookupResult=h;n.Search.GeocodeLocation=f;n.Search.GeocodeRequestOptions=w;n.Search.GeocodeResult=c;n.Search.MatchCode=b;n.Search.MatchConfidence=k;n.Search.PlaceResult=u;n.Search.ReverseGeocodeRequestOptions=d;n.Search.SearchManager=g}catch(l){if(n.logger)n.logger.logCriticalError(l);else throw l;}}).call(window)